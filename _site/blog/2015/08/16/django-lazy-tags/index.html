<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Django Lazy Tags | Grant McConnaughey</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
    <meta name="description" content="Grant McConnaughey, full-stack software engineer and technical lead based in Madison, Wisconsin." />
    <link rel="canonical" href="http://localhost:4000/blog/2015/08/16/django-lazy-tags/" />
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/images/favicons/site.webmanifest">

    <!-- Twitter cards -->
    <meta name="twitter:site"    content="@gmcconnaughey">
    <meta name="twitter:creator" content="@gmcconnaughey">
    <meta name="twitter:title"   content="Django Lazy Tags">

    
    <meta name="twitter:description" content="I work on a web application called SideKick. SideKick has several dashboards depending on the type of person logged in. The “type of person” could be an employee of SideCars (the company where I work), the owner of a car dealership, or a dealer’s agent. Each dashboard has lots of...">
    

    
    <meta name="twitter:card"  content="summary">
    <meta name="twitter:image" content="http://localhost:4000/images/favicons/android-chrome-512x512.png">
    
    <!-- end of Twitter cards -->

    <!-- OpenGraph -->
    <meta property="og:title" content="Django Lazy Tags" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://localhost:4000/blog/2015/08/16/django-lazy-tags/" />
    <meta property="og:image" content="http://localhost:4000/images/favicons/android-chrome-512x512.png" />

    <link rel="stylesheet" href="/css/pure-min.css" />
    <link rel="stylesheet" href="/css/grids-responsive-min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/css/magnific-popup.css" />
    <link rel="stylesheet" href="/css/main.css" />

    <script src="https://kit.fontawesome.com/43d71026bd.js" crossorigin="anonymous"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-51900491-1', 'auto');
      ga('send', 'pageview');
    </script>
</head>

<body>

    <header class="site-header">

  <div class="wrap">

    <a class="site-title" href="/">Grant McConnaughey</a>

    <nav class="site-nav">
      <div class="trigger">
        <a class="page-link" href="/projects/"><i class="fad fa-laptop-code"></i> Projects</a>
      </div>
    </nav>

  </div>

</header>

    <div class="page-content">
        <div class="wrap">
            <div class="post">

    

    <header class="post-header">
        <h1>Django Lazy Tags</h1>
        <p class="meta">
            <i class="fad fa-calendar-alt"></i> August 16, 2015
            • <i class="fad fa-clock"></i> 2 min read •
            
                <span class="tag"><i class="fad fa-tags"></i> django</span>
            
                <span class="tag"><i class="fad fa-tags"></i> projects</span>
            
        </p>
    </header>

    <article class="post-content">
        <p>I work on a web application called <a href="https://sidekick.sidecarsinc.com">SideKick</a>. SideKick has several dashboards depending on the type of person logged in. The “type of person” could be an employee of SideCars (the company where I work), the owner of a car dealership, or a dealer’s agent. Each dashboard has lots of handy widgets, as dashboards are wont to do. We contain the logic of each widget in a Django template tag so they can easily be resused. Here’s an example of a widget:</p>

<div style="text-align: center;">
    <img src="/images/django-lazy-tags/widget.png" alt="A SideKick dashboard widget" class="post-image-small" />
</div>

<p>Imagine that on the back-end this widget calls some third party quote of the day API. You wouldn’t want to slow down your page response just so you can send a request to the quotes API, receive the JSON response, parse it, and render the template tag. If the API is receiving an unusually large amount of requests then it will be very slow to respond to yours. If the API is having network issues then it will, again, be <em>slow</em>. Not cool.</p>

<p>That kind of issue is where Django lazy tags comes in.</p>
      <h2 id="enter-django-lazy-tags">
        
        
          Enter Django Lazy Tags <a href="#enter-django-lazy-tags" class="anchor">#</a>
        
        
      </h2>

<p><a href="https://github.com/grantmcconnaughey/django-lazy-tags">Django lazy tags</a> strives to create an easy, reusable way to add AJAX to your template tags. In the quotes widget example I could use Django lazy tags to render the widget after the page has already loaded. This has the benefit of not blocking the response to the user.</p>

<p>To use the Django lazy tags, first install the package using <a href="http://django-lazy-tags.readthedocs.org/en/latest/">the instructions in the documentation</a>. Have you done that? Good. Now let’s say you have a template tag called <code class="language-plaintext highlighter-rouge">quote_widget</code> in a tag library called <code class="language-plaintext highlighter-rouge">widget_tags</code>. All you need to do to make this a “lazy” tag is load the <code class="language-plaintext highlighter-rouge">lazy_tags</code> library and use the <code class="language-plaintext highlighter-rouge">lazy_tag</code> tag in your template:</p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="nv">load</span> <span class="nv">lazy_tags</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="nv">lazy_tag</span> <span class="s1">'widget_tags.quote_widget'</span> <span class="cp">%}</span>
<span class="c">{# Notice the 'tag_library.tag_name' syntax #}</span></code></pre></figure>

<p>This will output a placeholder where the AJAX call will spit out the tag HTML after it has loaded. Speaking of which, we still need to put the lazy tag JavaScript on the page so that it will make the AJAX calls. To do that, call the <code class="language-plaintext highlighter-rouge">lazy_tags_js</code> tag.</p>

<figure class="highlight"><pre><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="nv">lazy_tags_js</span> <span class="cp">%}</span></code></pre></figure>

<p>All done! The quote widget will now be blank when the page loads. Then when the page is finished loading, an AJAX call will be sent to your application, the tag HTML will be generated, and it will be sent back to the client. A nice loading spinner gif will even display while all of that is happening.</p>

<p>There are several settings I haven’t mentioned, as well as a cool decorator syntax that turns your template tags into lazy tags with nothing more than a single decorator. To submit issues or pull requests for this package, check it out on <a href="https://github.com/grantmcconnaughey/django-lazy-tags">Github</a>. You can also read about the package on <a href="https://pypi.python.org/pypi/django-lazy-tags">PyPI</a>.</p>
    </article>

    <hr style="margin-top: 3em; margin-bottom: 3em;" />

    <div>
        <form style="text-align:center;"
              class="pure-form"
              action="https://tinyletter.com/grantmcconnaughey"
              method="post"
              target="popupwindow"
              onsubmit="window.open('https://tinyletter.com/grantmcconnaughey', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
            <p>
                Sign up to receive e-mail updates in your inbox:
            </p>
            <input type="text" name="email" id="tlemail" placeholder="Enter your email address" style="min-width: 22rem;" />
            <input type="hidden" value="1" name="embed" />
            <input type="submit" value="Subscribe" class="pure-button pure-button-primary" />
            <p>
                <small><a href="https://tinyletter.com" target="_blank">powered by TinyLetter</a></small>
            </p>
        </form>
    </div>

</div>
        </div>
    </div>

    <footer class="site-footer">
    <div class="wrap">
        <div class="pure-g">
            <div class="pure-u-1 pure-u-sm-1-3">
                <h3>Find Me</h3>

                <ul class="pure-g">
                    <li class="pure-u-1-2 pure-u-sm-1">
                        <a href="https://techhub.social/@grantmc">
                            <span class="icon"><i class="fab fa-mastodon"></i></span>Mastodon
                        </a>
                    </li>
                    <li class="pure-u-1-2 pure-u-sm-1">
                        <a href="https://www.instagram.com/grantmcconnaughey/">
                            <span class="icon"><i class="fab fa-instagram"></i></span>Instagram
                        </a>
                    </li>
                    <li class="pure-u-1-2 pure-u-sm-1">
                        <a href="https://github.com/grantmcconnaughey">
                            <span class="icon"><i class="fab fa-github"></i></span>GitHub
                        </a>
                    </li>
                    <li class="pure-u-1-2 pure-u-sm-1">
                        <a href="https://www.linkedin.com/in/grant-mcconnaughey/">
                            <span class="icon"><i class="fab fa-linkedin"></i></span>LinkedIn
                        </a>
                    </li>
                    <li class="pure-u-1-2 pure-u-sm-1">
                        <a href="https://www.goodreads.com/user/show/38578828-grant-mcconnaughey">
                            <span class="icon"><i class="fab fa-goodreads"></i></span>Goodreads
                        </a>
                    </li>
                    <li class="pure-u-1-2 pure-u-sm-1">
                        <a href="https://soundcloud.com/grantmcconnaughey">
                            <span class="icon"><i class="fab fa-soundcloud"></i></span>Soundcloud
                        </a>
                    </li>
                </ul>
            </div>

            <div class="pure-u-1 pure-u-sm-1-3">
                <h3>Subscribe</h3>

                <ul class="pure-g">
                    <li class="pure-u-1-2 pure-u-sm-1">
                        <a href="https://tinyletter.com/grantmcconnaughey">
                            <span class="icon"><i class="fas fa-newspaper"></i></span>My Newsletter
                        </a>
                    </li>
                    <li class="pure-u-1-2 pure-u-sm-1">
                        <a href="https://medium.com/@gmcconnaughey">
                            <span class="icon"><i class="fab fa-medium"></i></span>Medium
                        </a>
                    </li>
                    <li class="pure-u-1-2 pure-u-sm-1">
                        <a href="https://dev.to/grantmcconnaughey">
                            <span class="icon"><i class="fab fa-dev"></i></span>Dev.to
                        </a>
                    </li>
                    <li class="pure-u-1-2 pure-u-sm-1">
                        <a href="/feed.xml">
                            <span class="icon"><i class="fas fa-rss"></i></span>RSS
                        </a>
                    </li>
                    <li class="pure-u-1-2 pure-u-sm-1">
                        <a href="https://github.com/grantmcconnaughey/grantmcconnaughey.github.io">
                            <span class="icon"><i class="fab fa-github"></i></span>Source
                        </a>
                    </li>
                </ul>
            </div>

            <div class="pure-u-1 pure-u-sm-1-3">
                <h3>About Me</h3>
                <p>My name is Grant McConnaughey. I'm a software developer specializing in Python, Django, Vue.js, and AWS. I lead software teams and mentor others to become leaders themselves.</p>

                <p><i class="far fa-copyright"></i> 2013-<script>document.write(new Date().getFullYear())</script><noscript>2020</noscript> Grant McConnaughey</p>
            </div>
        </div>
    </div>
</footer>


    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.2/fastclick.min.js"></script>
    <script>
        window.addEventListener('load', function() {
            FastClick.attach(document.body);
        }, false);
    </script>
</body>
</html>